# P7 计时器说明文档

## P7 计时器状态转移图

![未命名文件 (1)](D:\verilog\P7\p7设计文档\未命名文件 (1).jpg)

##### 说明

ctrl[2:1] 为0时，为模式0，否则为模式1。

ctrl[0] 产生使能信号，驱动计时器运行。

_IRQ为中断信号寄存器，需要与上中断使能 ctrl[3]才能触发中断。

## P7计时器使用说明

### 可行性操作

| 操作          | 对应模式与状态           | 产生的结果       |
| ------------- | ------------------------ | ---------------- |
| 写入ctrl[0]   | 在任意模式和状态都可执行 | 改变使用信号     |
| 写入ctrl[2:1] | 在任意模式和状态都可执行 | 改变计时器的模式 |
| 写入ctrl[3]   | 在任何模式和状态都可执行 | 改变中断使能信号 |
| 写入preset    | 在任何模式和状态都可执行 | 预设计数器周期   |

### 不可行操作

| 操作                     | 对应模式与状态   | 产生的结果                                               |
| ------------------------ | ---------------- | -------------------------------------------------------- |
| 写入ctrl[31:4]           | 在任意模式和状态 | 不会产生影响，但操作本身无意义                           |
| 写入count                | 在任意模式和状态 | 会导致用于计数的数被改变，影响计时器的计数周期           |
| 写入ctrl[2:1]为大于1的数 | 在任何模式和状态 | 不存在模式编号大于1的模式，会被误当作模式1而进行错误操作 |